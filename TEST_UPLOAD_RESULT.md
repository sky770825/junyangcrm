# æ–‡ä»¶ä¸Šä¼ æµ‹è¯•ç»“æœ

## ğŸ” æµ‹è¯•çŠ¶æ€

### å‘ç°çš„é—®é¢˜
- API è·¯ç”±è¿”å› 404
- å¯èƒ½åŸå› ï¼šNext.js éœ€è¦é‡æ–°ç¼–è¯‘è·¯ç”±

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. é‡å¯å¼€å‘æœåŠ¡å™¨
```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl+C)
# ç„¶åé‡æ–°å¯åŠ¨
npm run dev
```

### 2. ç­‰å¾…æœåŠ¡å™¨å®Œå…¨å¯åŠ¨
ç­‰å¾…çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹ä¿¡æ¯ï¼š
```
âœ“ Ready in X.Xs
â—‹ Local: http://localhost:3000
```

### 3. å†æ¬¡æµ‹è¯•ä¸Šä¼ 
```bash
npm run test:r2
```

æˆ–

```bash
curl -X POST http://localhost:3000/api/upload \
  -F "file=@test-upload.jpg" \
  -F "folder=test"
```

## ğŸ“‹ æµ‹è¯•æ–‡ä»¶

å·²åˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼š`test-upload.jpg` (1x1 åƒç´  PNG å›¾ç‰‡)

## ğŸ¯ é¢„æœŸç»“æœ

æˆåŠŸä¸Šä¼ ååº”è¯¥è¿”å›ï¼š
```json
{
  "success": true,
  "url": "https://pub-1e596b74f857475080db8cca0546d5b6.r2.dev/test/...",
  "key": "test/...",
  "size": 68,
  "type": "image/png"
}
```

## âš ï¸ å¦‚æœä»ç„¶å¤±è´¥

1. **æ£€æŸ¥ç¯å¢ƒå˜é‡**
   ```bash
   npm run verify:r2
   ```

2. **æ£€æŸ¥ R2 é…ç½®**
   - ç¡®è®¤ Bucket åç§°æ­£ç¡®
   - ç¡®è®¤ API Token æœ‰æ­£ç¡®æƒé™
   - ç¡®è®¤ Public URL å·²é…ç½®

3. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—**
   - åœ¨è¿è¡Œ `npm run dev` çš„ç»ˆç«¯æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

4. **æ£€æŸ¥æ–‡ä»¶ç±»å‹**
   - ç¡®ä¿ä¸Šä¼ çš„æ˜¯å›¾ç‰‡æˆ–è§†é¢‘æ–‡ä»¶
   - æ”¯æŒçš„ç±»å‹ï¼šJPEG, PNG, GIF, WebP, MP4, QuickTime
