# è·å– Cloudflare R2 Public URL è¯¦ç»†æŒ‡å—

## ğŸ¯ ç›®æ ‡
åœ¨ Cloudflare Dashboard ä¸­å¯ç”¨ Public Access å¹¶è·å– Public URL

## ğŸ“‹ è¯¦ç»†æ­¥éª¤

### æ­¥éª¤ 1: ç™»å½• Cloudflare Dashboard
1. è®¿é—®ï¼šhttps://dash.cloudflare.com
2. ä½¿ç”¨æ‚¨çš„è´¦å·ç™»å½•

### æ­¥éª¤ 2: è¿›å…¥ R2 é¡µé¢
1. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **R2**ï¼ˆå¯èƒ½éœ€è¦æ»šåŠ¨ï¼‰
2. ç‚¹å‡»è¿›å…¥ R2 é¡µé¢

### æ­¥éª¤ 3: é€‰æ‹©æ‚¨çš„ Bucket
1. åœ¨ Bucket åˆ—è¡¨ä¸­æ‰¾åˆ°ï¼š`junyangcrm-files`
2. ç‚¹å‡» Bucket åç§°è¿›å…¥è¯¦æƒ…é¡µ

### æ­¥éª¤ 4: æ‰“å¼€ Settings
1. åœ¨ Bucket è¯¦æƒ…é¡µï¼Œç‚¹å‡»é¡¶éƒ¨çš„ **Settings** æ ‡ç­¾
2. å‘ä¸‹æ»šåŠ¨åˆ° **Public Access** éƒ¨åˆ†

### æ­¥éª¤ 5: å¯ç”¨ Public Access
1. å¦‚æœæ˜¾ç¤º **"Allow Access"** æŒ‰é’®ï¼š
   - ç‚¹å‡» **Allow Access**
   - ç³»ç»Ÿä¼šç”Ÿæˆ Public URL
   - å¤åˆ¶æ˜¾ç¤ºçš„ URLï¼ˆæ ¼å¼ï¼š`https://pub-xxxxx.r2.dev`ï¼‰

2. å¦‚æœå·²ç»å¯ç”¨ï¼š
   - ä¼šç›´æ¥æ˜¾ç¤º Public URL
   - å¤åˆ¶è¯¥ URL

### æ­¥éª¤ 6: é…ç½®åˆ°é¡¹ç›®
è¿è¡Œä»¥ä¸‹å‘½ä»¤å¹¶ç²˜è´´ URLï¼š

```bash
./scripts/setup-public-url.sh
```

æˆ–è€…ç›´æ¥ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œæ·»åŠ ï¼š

```env
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev
```

## ğŸ” æ‰¾ä¸åˆ° Public Access é€‰é¡¹ï¼Ÿ

å¦‚æœæ‰¾ä¸åˆ° Public Access é€‰é¡¹ï¼Œå¯èƒ½çš„åŸå› ï¼š

1. **Bucket åˆšåˆ›å»ºï¼Œéœ€è¦ç­‰å¾…å‡ ç§’**
   - åˆ·æ–°é¡µé¢é‡è¯•

2. **æƒé™ä¸è¶³**
   - ç¡®ä¿æ‚¨æœ‰ Bucket çš„ç®¡ç†æƒé™

3. **åŒºåŸŸé™åˆ¶**
   - æŸäº›åŒºåŸŸå¯èƒ½ä¸æ”¯æŒ Public Access
   - å°è¯•åˆ›å»ºæ–° Bucket æ—¶é€‰æ‹©å…¶ä»–åŒºåŸŸ

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Public Access æ„å‘³ç€æ–‡ä»¶å¯ä»¥è¢«ä»»ä½•äººè®¿é—®**
   - ç¡®ä¿åªä¸Šä¼ å¯ä»¥å…¬å¼€çš„æ–‡ä»¶
   - æ•æ„Ÿæ–‡ä»¶ä¸è¦å¯ç”¨ Public Access

2. **Public URL æ˜¯æ°¸ä¹…çš„**
   - ä¸€æ—¦å¯ç”¨ï¼ŒURL ä¸ä¼šæ”¹å˜
   - å³ä½¿åˆ é™¤å¹¶é‡æ–°åˆ›å»º Bucketï¼ŒURL ä¹Ÿä¼šä¸åŒ

3. **å¯ä»¥éšæ—¶ç¦ç”¨**
   - åœ¨ Settings ä¸­ç‚¹å‡» "Disallow Access" å³å¯ç¦ç”¨

## ğŸ¯ å¿«é€Ÿé“¾æ¥

- Cloudflare Dashboard: https://dash.cloudflare.com
- R2 é¡µé¢: https://dash.cloudflare.com/82ebeb1d91888e83e8e1b30eeb33d3c3/r2
- æ‚¨çš„ Bucket: https://dash.cloudflare.com/82ebeb1d91888e83e8e1b30eeb33d3c3/r2/buckets/junyangcrm-files

## ğŸ’¡ æ›¿ä»£æ–¹æ¡ˆ

å¦‚æœä¸æƒ³å¯ç”¨ Public Accessï¼Œä¹Ÿå¯ä»¥ï¼š

1. **ä½¿ç”¨ç§æœ‰è®¿é—®**
   - æ–‡ä»¶é€šè¿‡ API è®¿é—®
   - éœ€è¦èº«ä»½éªŒè¯
   - æ›´å®‰å…¨

2. **ä½¿ç”¨é¢„ç­¾å URL**
   - ä¸´æ—¶è®¿é—®é“¾æ¥
   - å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´
   - éœ€è¦é¢å¤–çš„ä»£ç å®ç°
