# 🆓 免費模式說明

> 專案已設定為免費模式，無需 Gemini API Key 即可使用

---

## ✅ 已完成的調整

### 1. Gemini Service 免費模式支援

所有 AI 功能已更新為支援免費模式：

- ✅ **圖片生成** - 無 API Key 時返回原始圖片
- ✅ **文案生成** - 無 API Key 時返回基本模板
- ✅ **圖片分析** - 無 API Key 時返回基本描述
- ✅ **客戶解析** - 無 API Key 時返回基本結構
- ✅ **匹配分數** - 無 API Key 時使用規則計算
- ✅ **策略建議** - 無 API Key 時返回基本建議

### 2. 環境變數設定

- ✅ `GEMINI_API_KEY` 已註解（可選）
- ✅ 應用可在沒有 API Key 的情況下運行
- ✅ 所有功能都有免費模式的 fallback

---

## 🎯 免費模式功能

### 可用功能

1. **基本 CRM 功能**
   - ✅ 客戶管理
   - ✅ 任務追蹤
   - ✅ 交易看板
   - ✅ 聯絡人列表

2. **AI 功能（免費模式）**
   - ✅ 基本文案模板
   - ✅ 規則式匹配分數計算
   - ✅ 基本分析建議
   - ✅ 腳本模板

3. **資料管理**
   - ✅ 本地儲存（localStorage）
   - ✅ Supabase 資料庫整合

### 受限功能

以下功能需要 Gemini API Key 才能完整使用：

- ⚠️ 深度 AI 圖片分析
- ⚠️ 高品質文案生成
- ⚠️ 語音合成（TTS）
- ⚠️ 智慧圖片生成

---

## 🔧 如何啟用完整 AI 功能（可選）

如果您之後想要使用完整的 AI 功能：

1. **取得 Gemini API Key**
   - 前往: https://aistudio.google.com/app/apikey
   - 建立新的 API Key

2. **更新環境變數**
   ```bash
   # 編輯 .env.local
   GEMINI_API_KEY=your-actual-api-key
   ```

3. **重啟應用**
   ```bash
   npm run dev
   ```

---

## 📋 免費模式下的匹配分數計算

當沒有 API Key 時，`calculateMatchScore` 使用以下規則：

1. **地段匹配 (30%)**
   - 完全匹配：100 分
   - 部分匹配：70 分
   - 不匹配：50 分

2. **價值評估 (30%)**
   - 價格在預算 120% 內：100 分
   - 價格在預算 150% 內：70 分
   - 其他：30 分

3. **格局與條件 (40%)**
   - 房數匹配：+20 分
   - 坪數差異 ≤ 5 坪：+20 分
   - 坪數差異 ≤ 10 坪：+10 分

**總分 = 地段 × 0.3 + 價值 × 0.3 + 格局 × 0.4**

---

## ✅ 測試免費模式

```bash
# 啟動應用（不需要 API Key）
npm run dev

# 訪問: http://localhost:3000
# 所有功能都可以使用，AI 功能會使用免費模式
```

---

## 📝 注意事項

1. **免費模式限制**
   - AI 功能會返回基本模板或規則計算結果
   - 無法使用進階 AI 分析功能
   - 圖片生成功能受限

2. **資料儲存**
   - 客戶資料儲存在 localStorage
   - 可整合 Supabase 進行雲端儲存

3. **未來升級**
   - 隨時可以添加 API Key 啟用完整功能
   - 不需要修改程式碼

---

**專案狀態**: 🟢 已設定為免費模式，可以立即使用！
